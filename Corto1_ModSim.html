<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>corto1_modsim</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Corto1_ModSim_files/libs/clipboard/clipboard.min.js"></script>
<script src="Corto1_ModSim_files/libs/quarto-html/quarto.js"></script>
<script src="Corto1_ModSim_files/libs/quarto-html/popper.min.js"></script>
<script src="Corto1_ModSim_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Corto1_ModSim_files/libs/quarto-html/anchor.min.js"></script>
<link href="Corto1_ModSim_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Corto1_ModSim_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Corto1_ModSim_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Corto1_ModSim_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Corto1_ModSim_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="corto-1" class="level1">
<h1>Corto 1</h1>
<section id="integrantes" class="level2">
<h2 class="anchored" data-anchor-id="integrantes">Integrantes:</h2>
<ul>
<li>Juan Diego Avila 20090</li>
<li>Diego Franco 20240</li>
</ul>
</section>
<section id="parte-1---ejercicios-prácticos" class="level2">
<h2 class="anchored" data-anchor-id="parte-1---ejercicios-prácticos">Parte 1 - Ejercicios Prácticos</h2>
</section>
<section id="tasks-1" class="level2">
<h2 class="anchored" data-anchor-id="tasks-1">Tasks 1</h2>
<p>Suponga que usted está trabajando en la industria relacionada con meteorología, por lo cual le interesa saber la probabilidad de que haya <strong>N</strong> huracanes este año. Se sabe que la frecuencia histórica de huracanes es 7 por año, en otras palabras, el número promedio de huracanes por año es de 7.</p>
<ol type="1">
<li><strong>¿Es este un escenario que se pueda modelar como una variable aleatoria de Poisson? ¿Por qué?</strong></li>
</ol>
<p>Si ya que se tiene un intervalo de tiempo continuo y se tiene la frecuencia histórica en la que ocurre un huracán. Asimiso se tiene el promedio de huracanes por año y son eventos independientes. La distribución de Poisson es adecuada para modelar la ocurrencia de eventos raros en un rango de tiempo continuo.</p>
<ol start="2" type="1">
<li><strong>Considere que usted analizará hasta un máximo de 16 huracanes este año. Grafique PMF (probability mass function) de estos eventos</strong></li>
</ol>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> poisson</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>media <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>maximo <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(maximo <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>pmf_values <span class="op">=</span> poisson.pmf(x, media)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>plt.bar(x, pmf_values)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Número de Huracanes'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Probabilidad'</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f'PMF - Distribución de Poisson (λ = </span><span class="sc">{</span>media<span class="sc">}</span><span class="ss">)'</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Corto1_ModSim_files/figure-html/cell-2-output-1.png" class="img-fluid"></p>
</div>
</div>
<ol start="3" type="1">
<li><strong>Considere que usted analizará hasta un máximo de 16 huracanes este año. Grafique CDF (cumulative distribution function) de estos eventos</strong></li>
</ol>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> poisson</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>media <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>maximo <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(maximo <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>pmf_values <span class="op">=</span> poisson.cdf(x, media)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>plt.bar(x, pmf_values)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Número de Huracanes'</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Probabilidad'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="ss">f'CDF - Distribución de Poisson (λ = </span><span class="sc">{</span>media<span class="sc">}</span><span class="ss">)'</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Corto1_ModSim_files/figure-html/cell-3-output-1.png" class="img-fluid"></p>
</div>
</div>
<ol start="4" type="1">
<li><strong>¿Qué conclusiones puede sacar al observar las gráficas de los ejercicios anteriores?</strong></li>
</ol>
<ul>
<li><p>De la PMF se puede concluir que la probabilidad mas alta de ocurrencia de un huracán tiende siempre a la media, siendo desta de 7 huracanes al año. Disminuyendo la probabilidad de ocurrencia a medida que se aleja de la media.</p></li>
<li><p>De la CMF indica que la probabilidad de que ocurran hasta cierta cantidad de huracanes al año. Cuando la cantidad de huracanes por año es de 7 o menor la probabilidad es de 0.5, y a medida de que se acerca a el limite de huracanes, la probabilidad tiene a 1.</p></li>
<li><p>En general se puede observar la tendencia de cantidad de huracanes por año, lo que ayuda a entender la probabilidad de ocurrencia de huracanes, y permitir tomar decisiones en base a esto.</p></li>
</ul>
</section>
<section id="tasks-2" class="level2">
<h2 class="anchored" data-anchor-id="tasks-2">Tasks 2</h2>
<p>Usted es un analista de simulación encargado de modelar la llegada de clientes a una tienda minorista. Desea simular la cantidad de clientes que llegan por hora utilizando dos métodos diferentes: el método de transformación inversa y el método de rechazo.</p>
<section id="task-2.1" class="level3">
<h3 class="anchored" data-anchor-id="task-2.1">Task 2.1</h3>
<p>Defina la distribución de probabilidad objetivo para las llegadas de clientes en función de los datos históricos. Supongamos que ha recopilado datos y descubrió que la cantidad de clientes que llegan por hora sigue una distribución de Poisson con un promedio de 10 clientes por hora (λ = 10).</p>
<ol type="1">
<li><strong>Implemente el método de transformación inversa para generar muestras aleatorias a partir de la distribución de Poisson</strong></li>
</ol>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> poisson</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> poisson_cdf(lmbda, k):</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    cdf <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(k <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        cdf <span class="op">+=</span> (lmbda <span class="op">**</span> i) <span class="op">*</span> np.exp(<span class="op">-</span>lmbda) <span class="op">/</span> math.factorial(i)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cdf</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> poisson_inversa_cdf(lmbda, y):</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    k <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    cdf <span class="op">=</span> poisson_cdf(lmbda, k)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> cdf <span class="op">&lt;</span> y:</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        k <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        cdf <span class="op">=</span> poisson_cdf(lmbda, k)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> k</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generar_muestra_poisson(num_samples, lmbda):</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    samples <span class="op">=</span> []</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(num_samples):</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        U <span class="op">=</span> np.random.uniform()</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> poisson_inversa_cdf(lmbda, U)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        samples.append(x)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> samples</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><strong>Genere una muestra aleatoria de tamaño 1000 que represente el número de clientes que llegan en una hora.</strong></li>
</ol>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>promedio_por_hora <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>tamanio_muestra <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>muestra_aleatoria <span class="op">=</span> generar_muestra_poisson(tamanio_muestra, promedio_por_hora)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><strong>Trace un histograma de la muestra generada y compárelo con el PMF teórico de la distribución de Poisson.</strong></li>
</ol>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>histograma, bins, _ <span class="op">=</span> plt.hist(muestra_aleatoria, bins<span class="op">=</span><span class="bu">max</span>(muestra_aleatoria)<span class="op">-</span><span class="bu">min</span>(muestra_aleatoria)<span class="op">+</span><span class="dv">1</span>, density<span class="op">=</span><span class="va">True</span>, label<span class="op">=</span><span class="st">'Muestra Aleatoria'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="bu">max</span>(muestra_aleatoria)<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>pmf_teorica <span class="op">=</span> [poisson.pmf(k, promedio_por_hora) <span class="cf">for</span> k <span class="kw">in</span> x]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>plt.plot(x, pmf_teorica, <span class="st">'ro-'</span>, label<span class="op">=</span><span class="st">'PMF Teórica'</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Histograma de la Muestra Aleatoria vs PMF Teórico'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Número de Clientes por Hora'</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Probabilidad'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Corto1_ModSim_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>
<ol start="4" type="1">
<li><strong>Calcule la media y la varianza de la muestra generada y compárelas con los valores teóricos.</strong></li>
</ol>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>media_muestra <span class="op">=</span> np.mean(muestra_aleatoria)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>varianza_muestra <span class="op">=</span> np.var(muestra_aleatoria)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>media_teórica <span class="op">=</span> promedio_por_hora</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>varianza_teórica <span class="op">=</span> promedio_por_hora</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Media de la muestra generada:"</span>, media_muestra)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Media teórica:"</span>, media_teórica)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Varianza de la muestra generada:"</span>, varianza_muestra)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Varianza teórica:"</span>, varianza_teórica)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Media de la muestra generada: 10.045
Media teórica: 10
Varianza de la muestra generada: 10.056975
Varianza teórica: 10</code></pre>
</div>
</div>
<p>Como se puede observar el valor de la media de la muestra generada es bastante cercano al valor teórico, por lo que se puede concluir que la muestra generada es representativa de la distribución teórica.</p>
<p>Por otro lado sobre la comparacion de las variazas se puede observar que el valor de la varianza de la muestra generada es bastante cercano al valor teórico, por lo que se puede concluir que la dispersion de los datos de la muestra generada es consistente con la de la distribución teórica.</p>
</section>
</section>
<section id="task-2.2" class="level2">
<h2 class="anchored" data-anchor-id="task-2.2">Task 2.2</h2>
<p>Defina una distribución de propuesta que sea más fácil de muestrear y que cubra el soporte de la distribución de Poisson de destino. Por ejemplo, puede elegir una distribución uniforme o geométrica.</p>
<ol type="1">
<li>Calcule la constante C para acotar la relación entre el PMF objetivo y el PMF propuesto en todo el soporte de la distribución de Poisson</li>
</ol>
<div class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se va a utilizar una distribucion uniforme</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> poisson</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>lmbda <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calcualr_C(lmbda, k):</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> (lmbda <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    max_poisson_pmf <span class="op">=</span> poisson.pmf(lmbda, k)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    max_geom_pmf <span class="op">=</span> p <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p) <span class="op">**</span> k</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    C <span class="op">=</span> max_poisson_pmf <span class="op">/</span> max_geom_pmf</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> C</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><strong>Implemente el método de rechazo para generar muestras aleatorias a partir de la distribución de Poisson.</strong></li>
</ol>
<div class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pmf_geometrica(x, p):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> p <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p) <span class="op">**</span> (x <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> metodo_de_rechazo(size):</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    C <span class="op">=</span> calcualr_C(lmbda, size)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> lmbda</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    samples <span class="op">=</span> []</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(samples) <span class="op">&lt;</span> size:</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        x_geom <span class="op">=</span> np.random.geometric(p)  </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>        u <span class="op">=</span> np.random.uniform()  </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> u <span class="op">&lt;=</span> poisson.pmf(x_geom, lmbda) <span class="op">/</span> (C <span class="op">*</span> pmf_geometrica(x_geom, p)):</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            samples.append(x_geom)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> samples</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><strong>Genere una muestra aleatoria de tamaño 1000 que represente el número de clientes que llegan en una hora utilizando el método de rechazo</strong></li>
</ol>
<div class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>muestra_aleatoria <span class="op">=</span> metodo_de_rechazo(<span class="dv">1000</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(muestra_aleatoria)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[19, 11, 3, 12, 2, 23, 3, 26, 10, 2, 18, 5, 1, 29, 11, 4, 8, 12, 3, 2, 13, 20, 1, 18, 1, 14, 9, 2, 8, 14, 3, 5, 12, 25, 12, 16, 19, 5, 4, 8, 35, 5, 1, 29, 1, 18, 9, 9, 2, 5, 7, 11, 20, 20, 2, 6, 12, 25, 1, 16, 3, 11, 4, 23, 14, 13, 23, 26, 13, 12, 15, 5, 45, 16, 8, 1, 1, 5, 12, 1, 12, 15, 6, 7, 9, 14, 15, 3, 11, 19, 34, 9, 1, 34, 2, 7, 15, 1, 5, 17, 1, 1, 19, 19, 6, 8, 5, 5, 9, 14, 2, 2, 9, 9, 8, 3, 8, 3, 43, 23, 2, 1, 25, 10, 13, 38, 4, 21, 9, 30, 18, 5, 13, 2, 28, 3, 8, 1, 4, 1, 10, 7, 3, 6, 4, 2, 8, 1, 2, 2, 7, 14, 14, 12, 7, 6, 1, 10, 2, 17, 8, 27, 15, 4, 2, 11, 3, 22, 13, 1, 1, 47, 11, 8, 9, 4, 4, 33, 4, 6, 1, 23, 13, 12, 12, 14, 16, 5, 3, 4, 4, 5, 14, 19, 4, 8, 2, 2, 7, 2, 5, 5, 5, 6, 3, 5, 22, 6, 3, 1, 23, 25, 33, 4, 57, 7, 8, 14, 30, 1, 11, 4, 3, 13, 12, 1, 9, 6, 6, 4, 11, 15, 3, 9, 1, 7, 6, 4, 6, 15, 3, 21, 49, 18, 31, 14, 3, 8, 16, 8, 3, 21, 15, 5, 19, 10, 4, 4, 12, 10, 28, 6, 17, 14, 12, 2, 23, 36, 3, 7, 7, 26, 25, 1, 16, 15, 24, 9, 5, 1, 1, 17, 9, 13, 7, 1, 32, 28, 15, 2, 5, 12, 4, 2, 7, 1, 5, 2, 2, 6, 3, 2, 7, 3, 2, 11, 17, 2, 24, 21, 17, 1, 19, 8, 2, 7, 33, 9, 4, 3, 4, 22, 14, 25, 10, 7, 4, 4, 3, 9, 15, 18, 1, 12, 34, 3, 13, 1, 9, 9, 10, 9, 1, 6, 1, 12, 8, 2, 10, 5, 10, 14, 6, 9, 15, 10, 8, 16, 32, 5, 22, 1, 15, 2, 30, 6, 12, 4, 9, 1, 10, 1, 31, 1, 17, 18, 1, 3, 7, 9, 11, 4, 4, 2, 9, 16, 8, 13, 3, 6, 15, 1, 2, 1, 6, 2, 1, 7, 23, 16, 19, 12, 7, 16, 9, 3, 2, 3, 23, 12, 10, 16, 1, 5, 10, 7, 4, 3, 7, 3, 12, 3, 29, 2, 8, 9, 6, 4, 7, 17, 8, 4, 12, 22, 8, 3, 38, 4, 1, 12, 4, 10, 3, 10, 1, 7, 8, 1, 4, 2, 4, 1, 16, 6, 3, 3, 2, 13, 1, 4, 33, 9, 12, 23, 10, 15, 3, 3, 3, 2, 11, 6, 32, 3, 1, 13, 18, 4, 9, 27, 17, 2, 4, 2, 4, 3, 2, 19, 3, 7, 14, 2, 2, 9, 6, 18, 28, 8, 20, 4, 7, 3, 5, 8, 8, 9, 6, 8, 2, 6, 18, 22, 4, 3, 3, 12, 8, 18, 12, 10, 7, 8, 5, 25, 19, 11, 29, 1, 14, 7, 3, 1, 11, 15, 12, 13, 11, 24, 4, 1, 77, 2, 5, 3, 7, 1, 6, 2, 7, 5, 4, 2, 38, 3, 5, 13, 4, 2, 3, 9, 13, 2, 21, 4, 1, 1, 10, 6, 4, 9, 2, 23, 22, 3, 18, 8, 4, 42, 1, 3, 4, 1, 1, 7, 17, 5, 12, 7, 15, 15, 1, 8, 6, 9, 2, 13, 10, 7, 2, 6, 4, 4, 1, 3, 10, 15, 5, 1, 2, 3, 17, 3, 6, 3, 11, 9, 4, 14, 1, 24, 1, 3, 7, 10, 1, 1, 4, 1, 20, 9, 8, 11, 1, 11, 12, 7, 7, 24, 3, 7, 3, 4, 6, 10, 28, 9, 18, 14, 6, 2, 27, 13, 40, 4, 5, 21, 5, 2, 11, 1, 2, 2, 41, 13, 2, 9, 7, 14, 72, 17, 13, 4, 4, 3, 5, 11, 14, 21, 2, 36, 26, 9, 8, 12, 5, 4, 11, 3, 15, 14, 3, 24, 12, 1, 8, 1, 22, 28, 7, 12, 1, 22, 7, 4, 9, 17, 2, 16, 1, 2, 24, 31, 11, 1, 4, 5, 7, 12, 3, 15, 19, 19, 3, 7, 12, 3, 6, 42, 6, 3, 3, 17, 3, 8, 2, 3, 22, 3, 20, 1, 2, 14, 21, 6, 4, 12, 9, 13, 8, 3, 8, 10, 13, 17, 10, 4, 4, 11, 42, 1, 30, 9, 17, 18, 12, 11, 38, 11, 6, 12, 1, 1, 10, 3, 4, 3, 6, 5, 1, 3, 20, 3, 16, 1, 14, 4, 8, 2, 21, 1, 1, 4, 3, 5, 1, 8, 13, 5, 8, 1, 25, 6, 15, 4, 18, 4, 1, 5, 11, 4, 12, 6, 11, 12, 8, 3, 19, 11, 3, 19, 17, 4, 9, 4, 2, 8, 3, 6, 1, 34, 8, 6, 1, 7, 4, 28, 6, 8, 14, 28, 1, 3, 1, 6, 1, 1, 1, 4, 6, 34, 29, 3, 11, 2, 2, 3, 4, 24, 18, 3, 18, 46, 15, 12, 6, 8, 9, 2, 1, 1, 1, 11, 8, 2, 39, 1, 1, 6, 5, 6, 7, 28, 9, 2, 3, 4, 10, 2, 1, 2, 20, 3, 39, 3, 6, 3, 11, 6, 16, 11, 7, 1, 11, 10, 11, 5, 5, 3, 5, 5, 2, 5, 1, 10, 24, 11, 25, 10, 4, 4, 5, 3, 1, 18, 3, 12, 6, 35, 39, 2, 3, 5, 2, 4, 2, 1, 3, 2, 17, 6, 9, 2, 8, 1, 4, 13, 13, 26, 23, 3, 2, 14, 2, 4, 6, 31, 3, 9, 5, 7, 1, 6, 1, 21, 7, 3, 22, 16, 7, 3, 15, 14, 1, 14, 20, 6, 8, 2, 12, 12, 18, 10, 16, 5, 2, 2, 4, 5, 5, 2, 12, 4, 13, 25, 2, 14, 5, 7, 1, 1]</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\diego\AppData\Local\Temp\ipykernel_17496\4120136128.py:11: RuntimeWarning: divide by zero encountered in double_scalars
  if u &lt;= poisson.pmf(x_geom, lmbda) / (C * pmf_geometrica(x_geom, p)):</code></pre>
</div>
</div>
<ol start="4" type="1">
<li><strong>Trace un histograma de la muestra generada y compárelo con el PMF teórico de la distribución de Poisson</strong></li>
</ol>
<div class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>histograma, bins, _ <span class="op">=</span> plt.hist(muestra_aleatoria, bins<span class="op">=</span><span class="bu">max</span>(muestra_aleatoria)<span class="op">-</span><span class="bu">min</span>(muestra_aleatoria)<span class="op">+</span><span class="dv">1</span>, density<span class="op">=</span><span class="va">True</span>, label<span class="op">=</span><span class="st">'Muestra Aleatoria'</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="bu">max</span>(muestra_aleatoria)<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>pmf_teorica <span class="op">=</span> [poisson.pmf(k, lmbda) <span class="cf">for</span> k <span class="kw">in</span> x]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>plt.plot(x, pmf_teorica, <span class="st">'ro-'</span>, label<span class="op">=</span><span class="st">'PMF Teórica'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Histograma de la Muestra Aleatoria vs PMF Teórico'</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Número de Clientes por Hora'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Probabilidad'</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Corto1_ModSim_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
<ol start="5" type="1">
<li><strong>Calcule la media y la varianza de la muestra generada y compárelas con los valores teóricos.</strong></li>
</ol>
<div class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>media_muestra <span class="op">=</span> np.mean(muestra_aleatoria)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>varianza_muestra <span class="op">=</span> np.var(muestra_aleatoria)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>media_teórica <span class="op">=</span> lmbda</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>varianza_teórica <span class="op">=</span> lmbda</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Media de la muestra generada:"</span>, media_muestra)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Media teórica:"</span>, media_teórica)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Varianza de la muestra generada:"</span>, varianza_muestra)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Varianza teórica:"</span>, varianza_teórica)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Media de la muestra generada: 9.793
Media teórica: 10
Varianza de la muestra generada: 86.60815099999998
Varianza teórica: 10</code></pre>
</div>
</div>
<p>Al comparar el valor de la media de la muestra generada y la muestra teórica se puede observar que son valores bastante cercanos, por lo que se cocnluye que la muestra que se generó se asemeja bastante a la distribución teórica.</p>
<p>Por otro lado sobre la comparacion de las variazas se puede observar que el valor de la varianza de la muestra generada es bastante alta en comparación con el valor teórico, por lo que se puede concluir que la dispersion de los datos de la muestra generada es mayor a la de la distribución teórica.</p>
</section>
<section id="responda" class="level2">
<h2 class="anchored" data-anchor-id="responda">Responda:</h2>
<ol type="1">
<li>Compare los resultados de los dos métodos. ¿Qué método proporciona un mejor ajuste a la distribución de Poisson objetivo?
<ul>
<li>Como se pudo observar, los dos metodos dieron buenos resultados, pero el que tiene mejor ajuste a la distribución de Poisson objetivo es el método de tranformación inversa, ya que los puntos en la gráfica se encuentran más cerca de la línea de la distribución de Poisson objetivo y los valores tanto de media y varianza se encuentran más cerca de los valores de la distribución de Poisson objetivo. Cabe mencionar que en el metodo de rechazo los valores generados muestran una dispercion bastante mayor a la de la inversa lo que hace que el modelo no sea tan bueno.</li>
</ul></li>
<li>Discuta las ventajas y desventajas de cada método en términos de eficiencia y precisión.
<ul>
<li>Ventajas:
<ul>
<li>Método de transformación inversa:
<ul>
<li>El método de transformación inversa genera valores que si se ajustan a la distribución de Poisson objetivo.</li>
<li>En general, este método es más eficiente que el método de rechazo y mas acertado, lo que se pudo demostrar con la comparacion de los valores generados y teoricos.</li>
</ul></li>
<li>Método de rechazo:
<ul>
<li>El método de rechazo es más flexible y puede aplicarse a una amplia gama de distribuciones de Poisson.</li>
<li>La implementación del método de rechazo es más simple.</li>
</ul></li>
</ul></li>
<li>Desventajas:
<ul>
<li>Método de transformación inversa:
<ul>
<li>En algunos casos, encontrar la función inversa puede ser complicado o incluso imposible.</li>
<li>El método de transformación inversa puede no ser adecuado para algunas distribuciones de Poisson complejas.</li>
</ul></li>
<li>Método de rechazo:
<ul>
<li>El método de rechazo puede ser menos eficiente, especialmente cuando la tasa de rechazo de valores generados es alta.</li>
</ul></li>
</ul></li>
</ul></li>
<li>Considere diferentes escenarios, como cambiar la tasa de llegada promedio (λ) o usar diferentes distribuciones de propuestas. ¿Cómo funcionan los métodos en estos escenarios?
<ul>
<li>El metodo que mejor funcionaria para diferentes distribuciones propuestas seria el de rechazo, por su flexibilidad y facilidad de implementación.</li>
<li>Si cambia la tasa de llegada promedio (λ) el metodo que mejor funcionaria seria el de transformación inversa, ya que este metodo genera valores que se ajustan a la distribución de Poisson objetivo.</li>
</ul></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>